#!/usr/bin/env python3
"""–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º."""

import asyncio
import aiohttp
import sqlite3
from pathlib import Path

BOT_TOKEN = "8343378629:AAE4OlxArGXPpju0oEzk19Wmp4ofummP788"
DB_PATH = Path("/opt/bot/secretary.db")

MESSAGE = """üìã <b>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ RIZALTA AI System –¥–æ v2.1.0</b>
24.12.2025

<b>1. üè† –ö–∞—Ç–∞–ª–æ–≥ –ª–æ—Ç–æ–≤</b>
‚Äî –ë—ã–ª–æ: 69 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫
‚Äî –°—Ç–∞–ª–æ: 348 –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –ª–æ—Ç–æ–≤ (–ø–æ–ª–Ω–∞—è –±–∞–∑–∞ —Å —Å–∞–π—Ç–∞ –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–∞)

<b>2. üîç –°–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞</b>
‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è: –ö–æ—Ä–ø—É—Å ‚Üí –≠—Ç–∞–∂ ‚Üí –õ–æ—Ç—ã
‚Äî –ü–æ–∏—Å–∫ –ø–æ: –∫–æ—Ä–ø—É—Å—É, —ç—Ç–∞–∂—É, –Ω–æ–º–µ—Ä—É –ª–æ—Ç–∞, –ø–ª–æ—â–∞–¥–∏, —Ü–µ–Ω–µ
‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

<b>3. üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —É—Å–ª–æ–≤–∏—è</b>
‚Äî –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ü–µ–Ω—ã –Ω–∞ –≤—Å–µ –ª–æ—Ç—ã
‚Äî –†–∞—Å—Å—Ä–æ—á–∫–∞: 12 –∏ 18 –º–µ—Å—è—Ü–µ–≤ (–±—ã–ª–æ 12 –∏ 24)
‚Äî –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ —Å—Ç–∞–≤–∫–∏

<b>4. üé§ –ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</b>
‚Äî –£—Å–∏–ª–µ–Ω GPT Intent Router —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
‚Äî –†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –∑–∞–ø—Ä–æ—Å—ã: ¬´—á—Ç–æ –µ—Å—Ç—å –¥–æ 20 –º–ª–Ω –Ω–∞ –≤–µ—Ä—Ö–Ω–∏—Ö —ç—Ç–∞–∂–∞—Ö –∫–æ—Ä–ø—É—Å–∞ –±–∏–∑–Ω–µ—Å¬ª, ¬´–í708 –∫–æ—Ä–ø—É—Å 1¬ª, ¬´–ø–æ–∫–∞–∂–∏ –ª–æ—Ç—ã –∑–∞ 40 –º–ª–Ω –Ω–∞ 5 —ç—Ç–∞–∂–µ¬ª –∏ —Ç.–¥.

<b>5. üìÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</b>
‚Äî –ö–ü —Å —Ä–∞—Å—Å—Ä–æ—á–∫–æ–π 12 –∏ 18 –º–µ—Å—è—Ü–µ–≤
‚Äî –û–±–Ω–æ–≤–ª–µ–Ω—ã: —Ä–∞—Å—á—ë—Ç –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏, —Ä–∞—Å—Å—Ä–æ—á–∫–∞, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥–µ–ø–æ–∑–∏—Ç–æ–º
‚Äî PDF-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—ã–±–æ—Ä –∫–æ—Ä–ø—É—Å–∞ –¥–ª—è –¥—É–±–ª–µ–π

<b>6. üîÄ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—É–±–ª–µ–π</b>
‚Äî 70 –ª–æ—Ç–æ–≤ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–æ–¥—ã –≤ –æ–±–æ–∏—Ö –∫–æ—Ä–ø—É—Å–∞—Ö (–ê200, –ê202 –∏ –¥—Ä.)
‚Äî –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä –∫–æ—Ä–ø—É—Å–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –ø–æ –∫–æ–¥—É

<b>7. üß≠ –ï–¥–∏–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è</b>
‚Äî –†–∞–∑–¥–µ–ª—ã –ö–ü, –†–∞—Å—á—ë—Ç—ã –∏ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚Äî –ò–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –ª–æ—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏: –ö–ü, ROI, —Ä–∞—Å—Å—Ä–æ—á–∫–∞, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥–µ–ø–æ–∑–∏—Ç–æ–º

<b>8. üìÖ –õ–∏—á–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–∞—Ä—å</b>
‚Äî –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –≥–æ–ª–æ—Å–æ–º –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–º
‚Äî –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥: ¬´–∑–∞–≤—Ç—Ä–∞ –≤ 10 –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ö–ü –ò–≤–∞–Ω–æ–≤—É¬ª, ¬´–Ω–∞–ø–æ–º–Ω–∏ –ø–æ–∑–≤–æ–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É –≤ –ø—è—Ç–Ω–∏—Ü—É –≤ 15:00¬ª
‚Äî –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è: ¬´—á—Ç–æ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è¬ª, ¬´–ø–ª–∞–Ω –Ω–∞ –Ω–µ–¥–µ–ª—é¬ª"""


def get_all_users():
    """–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–æ—Ç–∞."""
    # –°–æ–±—Ä–∞–Ω–æ –∏–∑ –ª–æ–≥–æ–≤ 24.12.2025
    BOT_ID = 8343378629  # –ò—Å–∫–ª—é—á–∞–µ–º —Å–∞–º–æ–≥–æ –±–æ—Ç–∞
    users = [
        512319063,   # –°–µ—Ä–≥–µ–π
        1218114843,
        1270008981,
        1283324880,
        1500100952,
        297862179,
        452809137,
        6098350326,
        6148570013,
        622666056,
        6320054340,
        633076420,
        7119175741,
        7441583528,
        7617252773,
        8000703751,
        824528864,
        8352242683,
        8583875204,
        868791592,
        949370329,
        996436036,
    ]
    return [u for u in users if u != BOT_ID]


async def send_silent_message(chat_id: int):
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –±–µ—Å—à—É–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ."""
    url = f"https://api.telegram.org/bot{BOT_TOKEN}/sendMessage"
    payload = {
        "chat_id": chat_id,
        "text": MESSAGE,
        "parse_mode": "HTML",
        "disable_notification": True
    }
    async with aiohttp.ClientSession() as session:
        async with session.post(url, json=payload) as resp:
            result = await resp.json()
            status = "‚úÖ" if result.get("ok") else "‚ùå"
            print(f"{status} {chat_id}: {result.get('ok', result)}")


async def main():
    users = get_all_users()
    print(f"–û—Ç–ø—Ä–∞–≤–∫–∞ {len(users)} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º...")
    
    for user in users:
        await send_silent_message(user)
        await asyncio.sleep(0.5)
    
    print("–ì–æ—Ç–æ–≤–æ!")


if __name__ == "__main__":
    asyncio.run(main())
