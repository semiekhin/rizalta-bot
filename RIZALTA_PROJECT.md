# RIZALTA Bot ‚Äî –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

## –û –ø—Ä–æ–µ–∫—Ç–µ
AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ä–∏—ç–ª—Ç–æ—Ä–æ–≤. –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω–∞—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å RIZALTA Resort Belokurikha (–ê–ª—Ç–∞–π).

## –ë–æ—Ç—ã
- **Prod:** @RealtMeAI_bot (webhook, –ø–æ—Ä—Ç 8000)
- **Dev:** @rizaltatestdevop_bot (polling)

## –°–µ—Ä–≤–µ—Ä
```bash
ssh -p 2222 root@72.56.64.91
```
- `/opt/bot` ‚Äî prod
- `/opt/bot-dev` ‚Äî dev

## –°—Ç–µ–∫
Python 3.12 ¬∑ FastAPI ¬∑ OpenAI GPT-4o-mini ¬∑ Whisper ¬∑ SQLite ¬∑ Cloudflare Tunnel

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
/opt/bot/
‚îú‚îÄ‚îÄ app.py                    # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª (webhook, —Ä–æ—É—Ç–∏–Ω–≥, startup_event)
‚îú‚îÄ‚îÄ run_polling.py            # Dev —Ä–µ–∂–∏–º (polling, reminder_loop, monitoring_loop)
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ settings.py           # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py           # –≠–∫—Å–ø–æ—Ä—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ menu.py               # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ ai_chat.py            # AI –¥–∏–∞–ª–æ–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ booking.py            # –û–Ω–ª–∞–π–Ω-–ø–æ–∫–∞–∑—ã
‚îÇ   ‚îú‚îÄ‚îÄ booking_fixation.py   # –§–∏–∫—Å–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ ri.rclick.ru
‚îÇ   ‚îú‚îÄ‚îÄ booking_calendar.py   # –ö–∞–ª–µ–Ω–¥–∞—Ä—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ compare.py            # –î–µ–ø–æ–∑–∏—Ç vs RIZALTA
‚îÇ   ‚îú‚îÄ‚îÄ kp.py                 # –ö–ü + —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è + –ø–∞–≥–∏–Ω–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ calc_dynamic.py       # –†–∞—Å—á—ë—Ç—ã ROI
‚îÇ   ‚îú‚îÄ‚îÄ secretary.py          # AI-—Å–µ–∫—Ä–µ—Ç–∞—Ä—å + timezone
‚îÇ   ‚îú‚îÄ‚îÄ docs.py               # –î–æ–∫—É–º–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ news.py               # –ù–æ–≤–æ—Å—Ç–∏/–¥–∞–π–¥–∂–µ—Å—Ç
‚îÇ   ‚îú‚îÄ‚îÄ media.py              # –ú–µ–¥–∏–∞
‚îÇ   ‚îî‚îÄ‚îÄ units.py              # –†–∞–±–æ—Ç–∞ —Å –ª–æ—Ç–∞–º–∏
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ telegram.py           # API Telegram
‚îÇ   ‚îú‚îÄ‚îÄ ai_chat.py            # OpenAI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ calculations.py       # –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á—ë—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ monitoring.py         # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏ (NEW v2.1.1)
‚îÇ   ‚îú‚îÄ‚îÄ secretary_db.py       # –ë–î —Å–µ–∫—Ä–µ—Ç–∞—Ä—è + timezone
‚îÇ   ‚îú‚îÄ‚îÄ intent_router.py      # GPT Intent Router
‚îÇ   ‚îú‚îÄ‚îÄ rclick_service.py     # API ri.rclick.ru
‚îÇ   ‚îú‚îÄ‚îÄ deposit_calculator.py # –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–µ–ø–æ–∑–∏—Ç–∞ –¶–ë
‚îÇ   ‚îú‚îÄ‚îÄ investment_compare.py # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ compare_pdf_generator.py # PDF —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ kp_pdf_generator.py   # PDF –ö–ü
‚îÇ   ‚îú‚îÄ‚îÄ calc_xlsx_generator.py # Excel ROI
‚îÇ   ‚îú‚îÄ‚îÄ calc_universal.py     # –†–∞—Å—Å—Ä–æ—á–∫–∞ 12/18 –º–µ—Å
‚îÇ   ‚îú‚îÄ‚îÄ units_db.py           # –†–∞–±–æ—Ç–∞ —Å –ë–î –ª–æ—Ç–æ–≤ (348 –ª–æ—Ç–æ–≤)
‚îÇ   ‚îî‚îÄ‚îÄ kp_resources/         # –õ–æ–≥–æ—Ç–∏–ø, —à—Ä–∏—Ñ—Ç—ã
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ rizalta_knowledge_base.txt # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π AI
‚îÇ   ‚îú‚îÄ‚îÄ units.json            # –î–∞–Ω–Ω—ã–µ –ª–æ—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ rizalta_finance.json  # –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ properties.db             # 348 –ª–æ—Ç–æ–≤
‚îú‚îÄ‚îÄ secretary.db              # –ó–∞–¥–∞—á–∏ + users (timezone)
‚îî‚îÄ‚îÄ monitoring.db             # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
```

---

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. –ö–ü (–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
```
üìã –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ üè¢ –ü–æ –∫–æ—Ä–ø—É—Å—É ‚Üí –≠—Ç–∞–∂ ‚Üí –õ–æ—Ç—ã
‚îú‚îÄ üìê –ü–æ –ø–ª–æ—â–∞–¥–∏
‚îú‚îÄ üí∞ –ü–æ –±—é–¥–∂–µ—Ç—É (¬±10% –æ—Ç —Å—É–º–º—ã)
‚îî‚îÄ üîç –ü–æ –Ω–æ–º–µ—Ä—É –ª–æ—Ç–∞
```
- **3 –≤–∞—Ä–∏–∞–Ω—Ç–∞:** 100% –æ–ø–ª–∞—Ç–∞, 12 –º–µ—Å, 12+18 –º–µ—Å
- PDF —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º, –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–æ–π, —Ä–∞—Å—á—ë—Ç–∞–º–∏
- –°–∫–∏–¥–∫–∞ 5% –ø—Ä–∏ 100% –æ–ø–ª–∞—Ç–µ
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë N –ª–æ—Ç–æ–≤"

### 2. –†–∞—Å—á—ë—Ç—ã –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏
```
üí∞ –†–∞—Å—á—ë—Ç—ã –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∏ —Ä–∞—Å—Å—Ä–æ—á–∫–∏
‚îú‚îÄ üè¢ –ü–æ –∫–æ—Ä–ø—É—Å—É
‚îú‚îÄ üìê –ü–æ –ø–ª–æ—â–∞–¥–∏
‚îú‚îÄ üí∞ –ü–æ –±—é–¥–∂–µ—Ç—É
‚îî‚îÄ üîç –ü–æ –Ω–æ–º–µ—Ä—É –ª–æ—Ç–∞
```
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä ROI
- Excel –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- –†–∞—Å—Å—Ä–æ—á–∫–∞ 12 –∏ 18 –º–µ—Å—è—Ü–µ–≤

### 3. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–µ–ø–æ–∑–∏—Ç vs RIZALTA
```
üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –î–µ–ø–æ–∑–∏—Ç vs RIZALTA
‚îú‚îÄ üè¢ –ü–æ –∫–æ—Ä–ø—É—Å—É
‚îú‚îÄ üìê –ü–æ –ø–ª–æ—â–∞–¥–∏
‚îú‚îÄ üí∞ –ü–æ –±—é–¥–∂–µ—Ç—É
‚îî‚îÄ üîç –ü–æ –Ω–æ–º–µ—Ä—É –ª–æ—Ç–∞
```
- –î–∞–Ω–Ω—ã–µ –¶–ë –†–§ (–∫–ª—é—á–µ–≤–∞—è —Å—Ç–∞–≤–∫–∞)
- 3 —Å—Ü–µ–Ω–∞—Ä–∏—è (–±–∞–∑–æ–≤—ã–π, –æ–ø—Ç–∏–º–∏—Å—Ç, –ø–µ—Å—Å–∏–º–∏—Å—Ç)
- PDF –æ—Ç—á—ë—Ç

### 4. AI-—Å–µ–∫—Ä–µ—Ç–∞—Ä—å
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≥–æ–ª–æ—Å–æ–º/—Ç–µ–∫—Å—Ç–æ–º
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ 15 –º–∏–Ω—É—Ç (—Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞)
- 11 —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤ –†–æ—Å—Å–∏–∏ (UTC+2 ‚Äî UTC+12)
- –ü—Ä–æ—Å–º–æ—Ç—Ä: —Å–µ–≥–æ–¥–Ω—è, –∑–∞–≤—Ç—Ä–∞, –Ω–µ–¥–µ–ª—è

### 5. AI –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç
- GPT-4o-mini —Å Intent Router
- –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø—Ä–æ–µ–∫—Ç–∞
- –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ (Whisper)
- Function Calling –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π

### 6. –§–∏–∫—Å–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ri.rclick.ru
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∏—ç–ª—Ç–æ—Ä–∞ (—Ç–æ–∫–µ–Ω 90 –¥–Ω–µ–π)

### 7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (v2.1.1)
- –ê–ª–µ—Ä—Ç >30 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω
- –ê–ª–µ—Ä—Ç RAM >50%
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç 20:00

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### properties.db ‚Äî 348 –ª–æ—Ç–æ–≤
- –ö–æ—Ä–ø—É—Å 1 ¬´Family¬ª: 244 –ª–æ—Ç–∞
- –ö–æ—Ä–ø—É—Å 2 ¬´Business¬ª: 104 –ª–æ—Ç–∞
- 70 –¥—É–±–ª–µ–π –∫–æ–¥–æ–≤ (–ê200, –ê202 –∏ –¥—Ä.)

### secretary.db
- `tasks` ‚Äî –∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `users` ‚Äî timezone –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (default: 3 = –ú–æ—Å–∫–≤–∞)

### monitoring.db
- `stats` ‚Äî timestamp, user_id, request_type, response_time_ms

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### v2.1.1 (24.12.2025)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏ —Å –∞–ª–µ—Ä—Ç–∞–º–∏
- –ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞ –¥–ª—è —Å–µ–∫—Ä–µ—Ç–∞—Ä—è (11 –∑–æ–Ω)
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —á–µ—Ä–µ–∑ —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
- –£–±—Ä–∞–Ω–∞ –º–∞—Å—Å–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ö–ü

### v2.1.0 (24.12.2025)
- 348 –ª–æ—Ç–æ–≤ –≤–º–µ—Å—Ç–æ 69
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ö–æ—Ä–ø—É—Å ‚Üí –≠—Ç–∞–∂ ‚Üí –õ–æ—Ç—ã
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë"
- –û–±—Ä–∞–±–æ—Ç–∫–∞ 70 –¥—É–±–ª–µ–π –∫–æ–¥–æ–≤
- –ü–æ–∏—Å–∫ –ø–æ –±—é–¥–∂–µ—Ç—É ¬±10%
- –†–∞—Å—Å—Ä–æ—á–∫–∞ 12/18 –º–µ—Å—è—Ü–µ–≤
- GPT Intent Router —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

### v1.9.6 (19.12.2025)
- –ù–æ–≤—ã–π –¥–∏–∑–∞–π–Ω –ö–ü –ø—Ä–∏ 100% –æ–ø–ª–∞—Ç–µ
- 6 –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π –ø—Ä–æ–µ–∫—Ç–∞
- 9 –≤–∏–¥–µ–æ –ø—Ä–æ –ê–ª—Ç–∞–π

### v1.9.0 (—Ä–∞–Ω–µ–µ)
- AI-—Å–µ–∫—Ä–µ—Ç–∞—Ä—å
- –§–∏–∫—Å–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ rclick
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥–µ–ø–æ–∑–∏—Ç–æ–º
