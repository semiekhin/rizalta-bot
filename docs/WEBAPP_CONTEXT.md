# ‚ö†Ô∏è PROD/DEV –ù–ï –¢–†–û–ì–ê–¢–¨! –†–ê–ë–û–¢–ê–ï–ú –¢–û–õ–¨–ö–û –í /opt/webapp/ ‚ö†Ô∏è

# RIZALTA Web App v0.1.1
Standalone –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî fallback –µ—Å–ª–∏ Telegram —É–ø–∞–¥—ë—Ç.

## –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **–°–µ—Ä–≤–µ—Ä:** `ssh -p 2222 root@72.56.64.91`
- **WebApp:** `/opt/webapp` (–æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –±–æ—Ç–∞!)
- **Frontend:** React + Vite + Tailwind (build –≤ /frontend/dist/)
- **Backend:** FastAPI ‚Üí –ø–æ—Ä—Ç 8003
- **PROD –±–æ—Ç:** `/opt/bot` (–ù–ï –¢–†–û–ì–ê–¢–¨)
- **DEV –±–æ—Ç:** `/opt/bot-dev` (–ù–ï –¢–†–û–ì–ê–¢–¨)

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (23.01.2026)
‚úÖ Frontend: 4 —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥–æ—Ç–æ–≤—ã (Home, Catalog, LotDetail, Chat)
‚úÖ Backend: FastAPI –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç /api/lots –∫ PROD
‚úÖ Production build: /opt/webapp/frontend/dist/
‚úÖ –¢—É–Ω–Ω–µ–ª—å —Å–æ–∑–¥–∞–Ω: 2ff508f2-9445-43ac-ab0b-4e0b38d487a0
‚úÖ DNS: webapp.rizaltaservice.ru
‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç (curl 200 OK)

‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: ERR_HTTP2_PING_FAILED –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ JS/CSS —á–µ—Ä–µ–∑ Cloudflare —Ç—É–Ω–Ω–µ–ª—å

## üìã –ó–ê–î–ê–ß–ò

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ (–±–ª–æ–∫–µ—Ä—ã)
| # | –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|--------|--------|----------|
| 1 | –¢—É–Ω–Ω–µ–ª—å/–¥–æ—Å—Ç—É–ø | ‚ö†Ô∏è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | ERR_HTTP2_PING_FAILED ‚Äî –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å nginx –∏–ª–∏ Vercel |
| 2 | GPT –≤ —á–∞—Ç | –∑–∞–≥–ª—É—à–∫–∞ | –ü–æ–¥–∫–ª—é—á–∏—Ç—å GPT API –∫–∞–∫ –≤ –±–æ—Ç–µ |

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
| # | –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|--------|--------|----------|
| 3 | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | –Ω–µ—Ç | –¢–µ–ª–µ—Ñ–æ–Ω + SMS (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å) |
| 4 | –ö–Ω–æ–ø–∫–∞ "–ü–æ–ª—É—á–∏—Ç—å –ö–ü" | –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å kp_pdf_generator.py –∏–∑ –±–æ—Ç–∞ |
| 5 | –ö–Ω–æ–ø–∫–∞ "–†–∞—Å—á—ë—Ç ROI" | –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å calc_universal.py –∏–∑ –±–æ—Ç–∞ |
| 6 | –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø–æ–∫–∞–∑" | –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –§–æ—Ä–º–∞ + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ |

### üü¢ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
| # | –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|--------|--------|----------|
| 7 | Systemd —Å–µ—Ä–≤–∏—Å—ã | –Ω–µ—Ç | –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ backend + tunnel |
| 8 | –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ú–µ–Ω—é" | –Ω–µ—Ç | –û –ø—Ä–æ–µ–∫—Ç–µ, –∫–æ–Ω—Ç–∞–∫—Ç—ã, –¥–æ–∫—É–º–µ–Ω—Ç—ã |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```
/opt/webapp/
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ src/pages/       # Home, Catalog, LotDetail, Chat
‚îÇ   ‚îú‚îÄ‚îÄ dist/            # Production build
‚îÇ   ‚îî‚îÄ‚îÄ vite.config.js
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îî‚îÄ‚îÄ app.py           # FastAPI + —Å—Ç–∞—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ venv/
‚îî‚îÄ‚îÄ docs/
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç—É–Ω–Ω–µ–ª—è
- –§–∞–π–ª: /root/.cloudflared/config-webapp.yml
- Tunnel ID: 2ff508f2-9445-43ac-ab0b-4e0b38d487a0
- DNS: webapp.rizaltaservice.ru

## –ó–∞–ø—É—Å–∫ (–ª–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
```bash
# Backend
cd /opt/webapp/backend && source /opt/webapp/venv/bin/activate
nohup python3 -m uvicorn app:app --host 127.0.0.1 --port 8003 > /tmp/webapp-backend.log 2>&1 &

# –ü—Ä–æ–≤–µ—Ä–∫–∞
curl http://127.0.0.1:8003/              # HTML
curl http://127.0.0.1:8003/api/lots      # JSON
```

## –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –±–æ—Ç–µ (–¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è)
- `/opt/bot/services/kp_pdf_generator.py` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ö–ü
- `/opt/bot/services/calc_universal.py` ‚Äî —Ä–∞—Å—á—ë—Ç—ã —Ä–∞—Å—Å—Ä–æ—á–∫–∏
- `/opt/bot/services/intent_router.py` ‚Äî GPT —Ä–æ—É—Ç–µ—Ä
- `/opt/bot/handlers/calc_dynamic.py` ‚Äî ROI —Ä–∞—Å—á—ë—Ç—ã
