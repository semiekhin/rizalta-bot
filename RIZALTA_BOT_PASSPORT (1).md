# RIZALTA Bot ‚Äî –ü–∞—Å–ø–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ü—Ä–æ–µ–∫—Ç:** Telegram-–±–æ—Ç –¥–ª—è RIZALTA Resort Belokurikha
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ, —Ä–∞—Å—á—ë—Ç –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏, –ø–æ–¥–±–æ—Ä –ª–æ—Ç–æ–≤, –∑–∞–ø–∏—Å—å –Ω–∞ –ø–æ–∫–∞–∑
**–°–µ—Ä–≤–µ—Ä:** 72.56.64.91 (VPS Ubuntu 24)
**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** /opt/bot/
**–°–µ—Ä–≤–∏—Å:** realtmeai-bot.service

---

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –†–∞–±–æ—Ç–∞—é—â–∞—è –≤–µ—Ä—Å–∏—è: –ú–û–ù–û–õ–ò–¢
- **–§–∞–π–ª:** `/opt/bot/app.py` (127 KB, ~2700 —Å—Ç—Ä–æ–∫)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –í—Å—è –ª–æ–≥–∏–∫–∞ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –û–¢–õ–û–ñ–ï–ù
- –ü–æ–ø—ã—Ç–∫–∞ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞ –≤—Å—é –ª–æ–≥–∏–∫—É
- –ù—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –∞–∫–∫—É—Ä–∞—Ç–Ω–æ, –∏–∑—É—á–∏–≤ –æ—Ä–∏–≥–∏–Ω–∞–ª

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|-----------|------------|
| Backend | Python 3.12 + FastAPI |
| ASGI —Å–µ—Ä–≤–µ—Ä | Uvicorn |
| AI | OpenAI API (gpt-4o-mini) |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | JSON —Ñ–∞–π–ª—ã (–±–µ–∑ –ë–î) |
| –°–æ—Å—Ç–æ—è–Ω–∏—è | In-memory —Å–ª–æ–≤–∞—Ä–∏ |
| –î–µ–ø–ª–æ–π | systemd service |
| Webhook | Telegram Bot API |

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```
/opt/bot/
‚îú‚îÄ‚îÄ app.py                    # üî• –ì–õ–ê–í–ù–´–ô –§–ê–ô–õ (–º–æ–Ω–æ–ª–∏—Ç, 127KB)
‚îú‚îÄ‚îÄ .env                      # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ venv/                     # Python –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ instructions.txt      # –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è AI
‚îÇ
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ units.json            # –ë–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —é–Ω–∏—Ç–∞—Ö
‚îÇ   ‚îú‚îÄ‚îÄ rizalta_finance.json  # –ü–æ–ª–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç!)
‚îÇ   ‚îú‚îÄ‚îÄ rizalta_knowledge_base.txt  # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è AI
‚îÇ   ‚îú‚îÄ‚îÄ text_why_rizalta.md   # –¢–µ–∫—Å—Ç "–ü–æ—á–µ–º—É RIZALTA"
‚îÇ   ‚îú‚îÄ‚îÄ text_why_belokuriha.md # –¢–µ–∫—Å—Ç "–ü–æ—á–µ–º—É –ë–µ–ª–æ–∫—É—Ä–∏—Ö–∞/–ê–ª—Ç–∞–π"
‚îÇ   ‚îú‚îÄ‚îÄ text_architect.md     # –¢–µ–∫—Å—Ç –æ–± –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–µ
‚îÇ   ‚îú‚îÄ‚îÄ managers.json         # –°–ø–∏—Å–æ–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ layouts/              # PDF –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ A209_plan.pdf
‚îÇ       ‚îú‚îÄ‚îÄ B210_plan.pdf
‚îÇ       ‚îî‚îÄ‚îÄ A305_plan.pdf
‚îÇ
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ rizalta/
‚îÇ       ‚îî‚îÄ‚îÄ marketing/        # –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (PDF)
‚îÇ
‚îî‚îÄ‚îÄ logs/                     # –õ–æ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```bash
# Telegram
TELEGRAM_BOT_TOKEN=<—Ç–æ–∫–µ–Ω –±–æ—Ç–∞>

# OpenAI
OPENAI_API_KEY=<–∫–ª—é—á API>

# Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
SMTP_HOST=smtp.mail.ru
SMTP_PORT=587
SMTP_USER=<email>
SMTP_PASSWORD=<–ø–∞—Ä–æ–ª—å>
NOTIFICATION_EMAIL=<–∫—É–¥–∞ —Å–ª–∞—Ç—å –∑–∞—è–≤–∫–∏>

# Telegram ID –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
MANAGER_TELEGRAM_IDS=<id1>,<id2>
```

---

## –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
systemctl start realtmeai-bot
systemctl stop realtmeai-bot
systemctl restart realtmeai-bot
```

### –õ–æ–≥–∏
```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
journalctl -u realtmeai-bot -n 50 --no-pager

# –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u realtmeai-bot -f
```

### –°—Ç–∞—Ç—É—Å
```bash
systemctl status realtmeai-bot
```

---

## Webhook

- **URL:** `https://<–¥–æ–º–µ–Ω>/telegram/webhook`
- **Endpoint –≤ –∫–æ–¥–µ:** `@app.post("/telegram/webhook")`
- **–ü–æ—Ä—Ç:** 8000 (Uvicorn)
- Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –≤–Ω–µ—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ localhost:8000

---

## –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞

### 1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- –û –ø—Ä–æ–µ–∫—Ç–µ (–ø–æ—á–µ–º—É RIZALTA, –ø–æ—á–µ–º—É –ê–ª—Ç–∞–π, –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä)
- –†–∞—Å—á—ë—Ç—ã (ROI, —Ä–∞—Å—Å—Ä–æ—á–∫–∞/–∏–ø–æ—Ç–µ–∫–∞)
- –ü–æ–¥–±–æ—Ä –ª–æ—Ç–∞ (–ø–æ –±—é–¥–∂–µ—Ç—É –∏ —Ñ–æ—Ä–º–∞—Ç—É –æ–ø–ª–∞—Ç—ã)
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∏ (PDF)
- –ó–∞–ø–∏—Å—å –Ω–∞ –ø–æ–∫–∞–∑
- AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç

### 2. –†–∞—Å—á—ë—Ç –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ (ROI)
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `rizalta_finance.json`
- –°—á–∏—Ç–∞–µ—Ç: –≤–∞–ª–æ–≤–∞—è –≤—ã—Ä—É—á–∫–∞, —á–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥, ROI %
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑ –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ –≥–æ–¥–∞–º

### 3. –ü–æ–¥–±–æ—Ä –ª–æ—Ç–∞
- –°–ø—Ä–∞—à–∏–≤–∞–µ—Ç –±—é–¥–∂–µ—Ç
- –°–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç (—Ä–∞—Å—Å—Ä–æ—á–∫–∞/–∏–ø–æ—Ç–µ–∫–∞/–ø–æ–ª–Ω–∞—è –æ–ø–ª–∞—Ç–∞)
- –§–∏–ª—å—Ç—Ä—É–µ—Ç —é–Ω–∏—Ç—ã –ø–æ —Ü–µ–Ω–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å —Ä–∞—Å—á—ë—Ç–∞–º–∏

### 4. –†–∞—Å—Å—Ä–æ—á–∫–∞ –∏ –∏–ø–æ—Ç–µ–∫–∞
- –ü—Ä–æ–≥—Ä–∞–º–º—ã –∏–∑ `rizalta_finance.json`
- –°—á–∏—Ç–∞–µ—Ç –ø–µ—Ä–≤—ã–π –≤–∑–Ω–æ—Å, –µ–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç—ë–∂
- –õ—å–≥–æ—Ç–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã –¥–ª—è –∏–ø–æ—Ç–µ–∫–∏

### 5. –ó–∞–ø–∏—Å—å –Ω–∞ –ø–æ–∫–∞–∑
- –°–æ–±–∏—Ä–∞–µ—Ç: –∏–º—è, –∫–æ–Ω—Ç–∞–∫—Ç, –±—é–¥–∂–µ—Ç, —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º (Telegram + Email)

### 6. AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç
- –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑—É –∑–Ω–∞–Ω–∏–π + –¥–∞–Ω–Ω—ã–µ –æ —é–Ω–∏—Ç–∞—Ö
- –ú–æ–¥–µ–ª—å: gpt-4o-mini, max_tokens: 800

---

## –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### rizalta_finance.json (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫)
```json
{
  "units": [
    {
      "unit_code": "A209",
      "title": "–ê–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç A209",
      "area_m2": 45.5,
      "price_rub": 15000000,
      "daily_rate_rub": 15000,
      "occupancy_pct": 60,
      "expenses_pct": 50,
      "rental_assumptions": {...},
      "capitalization_projection": {
        "total_return_pct_by_year": [
          {"year": "2026", "total_return_pct": 25},
          {"year": "2027", "total_return_pct": 45}
        ]
      }
    }
  ],
  "installment_programs": [
    {
      "name": "–†–∞—Å—Å—Ä–æ—á–∫–∞ 12 –º–µ—Å",
      "first_payment_pct": 30,
      "months": 12
    }
  ],
  "mortgage_programs": [
    {
      "name": "–ò–ø–æ—Ç–µ–∫–∞ –°–±–µ—Ä–±–∞–Ω–∫",
      "first_payment_pct": 20,
      "grace_period_months": 24,
      "reduced_payment_rub": 25000,
      "normal_payment_rub": 45000
    }
  ],
  "defaults": {
    "daily_rate_rub": 15000,
    "occupancy_pct": 60,
    "expenses_pct": 50
  }
}
```

### units.json (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫)
```json
[
  {
    "id": 1,
    "unit_code": "A209",
    "area_m2": 45.5,
    "price_rub": 15000000
  }
]
```

---

## –ë—ç–∫–∞–ø—ã

–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `/opt/bot_backup_YYYYMMDD_HHMMSS/`

–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –±—ç–∫–∞–ø —Å–æ–¥–µ—Ä–∂–∏—Ç:
- `app.py` ‚Äî —Ä–∞–±–æ—á–∏–π –º–æ–Ω–æ–ª–∏—Ç (127KB)
- `data/` ‚Äî –≤—Å–µ JSON –∏ —Ç–µ–∫—Å—Ç—ã
- `config/` ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI
- `venv/` ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- `.env` ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

---

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### –ù–æ—è–±—Ä—å 2025
1. ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (–º–æ–Ω–æ–ª–∏—Ç)
2. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI (gpt-4o-mini)
3. ‚úÖ –†–∞—Å—á—ë—Ç ROI, —Ä–∞—Å—Å—Ä–æ—á–∫–∏, –∏–ø–æ—Ç–µ–∫–∏
4. ‚úÖ –ü–æ–¥–±–æ—Ä –ª–æ—Ç–∞ –ø–æ –±—é–¥–∂–µ—Ç—É
5. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º (Telegram + Email)
6. ‚úÖ PDF –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏
7. ‚úÖ –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è AI
8. ‚è∏Ô∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ –º–æ–¥—É–ª–∏ ‚Äî –æ—Ç–ª–æ–∂–µ–Ω (–ø–æ—Ç–µ—Ä—è –ª–æ–≥–∏–∫–∏)
9. ‚è∏Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫–æ–º ‚Äî –æ—Ç–ª–æ–∂–µ–Ω–∞

---

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Å–¥–µ–ª–∞–Ω–æ, –Ω–æ handlers —É–ø—Ä–æ—â–µ–Ω—ã ‚Äî –ø–æ—Ç–µ—Ä—è–Ω–∞ –ª–æ–≥–∏–∫–∞.

**–ß—Ç–æ –≥–æ—Ç–æ–≤–æ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å):**
- ‚úÖ `data_loader.py` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ JSON (–∑–∞–º–µ–Ω—è–µ—Ç yandex_disk.py)
- ‚úÖ `config.py` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–Ω–æ–ø–∫–∏
- ‚úÖ `models/state.py` ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–≤
- ‚úÖ `services/telegram.py` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ `services/notifications.py` ‚Äî email + TG —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ `services/calculations.py` ‚Äî —Ä–∞—Å—á—ë—Ç—ã ROI
- ‚úÖ `services/referral.py` ‚Äî —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (—É–ø—Ä–æ—â–µ–Ω–∞)

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å:**
- ‚ùå `handlers/units.py` ‚Äî –ª–æ–≥–∏–∫–∞ ROI, –ø–æ–¥–±–æ—Ä–∞ –ª–æ—Ç–∞ –£–ü–†–û–©–ï–ù–ê
- ‚ùå `handlers/menu.py` ‚Äî –ª–æ–≥–∏–∫–∞ –º–µ–Ω—é –£–ü–†–û–©–ï–ù–ê
- ‚ùå `handlers/ai_chat.py` ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

**–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:**
1. –í–∑—è—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π `app.py` (127KB –º–æ–Ω–æ–ª–∏—Ç)
2. –ù–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏: —Ä–∞—Å—á—ë—Ç ROI, –ø–æ–¥–±–æ—Ä –ª–æ—Ç–∞, —Ä–∞—Å—Å—Ä–æ—á–∫–∞/–∏–ø–æ—Ç–µ–∫–∞
3. –í—ã—Ç–∞—â–∏—Ç—å –ü–û–õ–ù–£–Æ –ª–æ–≥–∏–∫—É (–Ω–µ —É–ø—Ä–æ—â–∞—Ç—å!)
4. –í—Å—Ç–∞–≤–∏—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ handlers
5. –ó–∞–º–µ–Ω–∏—Ç—å `import yandex_disk` –Ω–∞ `import data_loader`
6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é —Ñ—É–Ω–∫—Ü–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ JSON/—Ç–µ–∫—Å—Ç–æ–≤ —Å –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫–∞
- [ ] –ú–µ–Ω–µ–¥–∂–µ—Ä—ã —Å–º–æ–≥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ SSH
- [ ] Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –£–ª—É—á—à–µ–Ω–∏—è
- [ ] –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–ø—Ä–∏–≤—è–∑–∫–∞ –∫ –º–µ–Ω–µ–¥–∂–µ—Ä—É)
- [ ] –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤ –¥–ª—è AI
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### Webhook endpoint
```python
# –ü–†–ê–í–ò–õ–¨–ù–û:
@app.post("/telegram/webhook")

# –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–±—ã–ª–æ –æ—à–∏–±–∫–æ–π):
@app.post("/webhook")
```

### –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–¥–æ–≤ —é–Ω–∏—Ç–æ–≤
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–≤–æ–¥–∏—Ç—å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π (–ê209 –≤–º–µ—Å—Ç–æ A209).
–ù—É–∂–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏:
```python
def normalize_unit_code(code):
    # –ê‚ÜíA, –í‚ÜíB, –°‚ÜíC –∏ —Ç.–¥.
    # –í–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
1. `rizalta_finance.json` ‚Äî –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
2. `units.json` ‚Äî –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (fallback)

### F-string –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö
–ü—Ä–æ–±–ª–µ–º–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–≤—ã–∑—ã–≤–∞–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É):
```python
# –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
f"–ë—é–¥–∂–µ—Ç: {f'{budget:,} ‚ÇΩ' if budget else '–ù–µ —É–∫–∞–∑–∞–Ω'}"

# –ü–†–ê–í–ò–õ–¨–ù–û:
budget_str = f"{budget:,} ‚ÇΩ".replace(",", " ") if budget else "–ù–µ —É–∫–∞–∑–∞–Ω"
f"–ë—é–¥–∂–µ—Ç: {budget_str}"
```

---

## SSH –¥–æ—Å—Ç—É–ø

```bash
ssh root@72.56.64.91
```

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–æ–µ–∫—Ç: RIZALTA Resort Belokurikha
–ë–æ—Ç: @rizalta_bot (–∏–ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π username)

---

---

## –†–∞–±–æ—á–∏–π –∞—Ä—Ö–∏–≤: bot_working_20251128.tar.gz

**–†–∞–∑–º–µ—Ä:** 43 KB
**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**

### –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥
| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|----------|
| `bot/app.py` | 127 KB | –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª (–º–æ–Ω–æ–ª–∏—Ç) |
| `bot/.env` | 663 B | –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è |

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|----------|
| `bot/config/instructions.txt` | 6.2 KB | –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è AI |

### –î–∞–Ω–Ω—ã–µ (bot/data/)
| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|----------|
| `rizalta_finance.json` | 6.5 KB | **–ì–ª–∞–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö** ‚Äî —é–Ω–∏—Ç—ã, —Ä–∞—Å—Å—Ä–æ—á–∫–∞, –∏–ø–æ—Ç–µ–∫–∞ |
| `units.json` | 1.9 KB | –ë–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —é–Ω–∏—Ç–æ–≤ (fallback) |
| `rizalta_knowledge_base.txt` | 10.2 KB | –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è AI |
| `text_why_rizalta.md` | 5.9 KB | –¢–µ–∫—Å—Ç "–ü–æ—á–µ–º—É RIZALTA" |
| `text_why_belokuricha.md` | 1.3 KB | –¢–µ–∫—Å—Ç "–ü–æ—á–µ–º—É –ë–µ–ª–æ–∫—É—Ä–∏—Ö–∞" |
| `text_architect.md` | 1.6 KB | –¢–µ–∫—Å—Ç –æ–± –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–µ |
| `installment_programs.json` | 517 B | –ü—Ä–æ–≥—Ä–∞–º–º—ã —Ä–∞—Å—Å—Ä–æ—á–∫–∏ |
| `mortgage_programs.json` | 1.0 KB | –ò–ø–æ—Ç–µ—á–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã |
| `invest_scenarios.json` | 661 B | –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ |
| `market.json` | 756 B | –î–∞–Ω–Ω—ã–µ —Ä—ã–Ω–∫–∞ |
| `layouts/` | ‚Äî | PDF –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏ (–ø—É—Å—Ç–∞—è –≤ –∞—Ä—Ö–∏–≤–µ) |

### –ë—ç–∫–∞–ø—ã –¥–∞–Ω–Ω—ã—Ö (–≤ –∞—Ä—Ö–∏–≤–µ)
- `rizalta_finance.backup.*` ‚Äî –≤–µ—Ä—Å–∏–∏ –æ—Ç 16-17 –Ω–æ—è–±—Ä—è
- `units.backup.*` ‚Äî –≤–µ—Ä—Å–∏–∏ –æ—Ç 16-17 –Ω–æ—è–±—Ä—è
- `text_why_rizalta.backup.*` ‚Äî –≤–µ—Ä—Å–∏—è –æ—Ç 16 –Ω–æ—è–±—Ä—è

---

## –ö–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏–∑ –∞—Ä—Ö–∏–≤–∞

```bash
# –ù–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ
cd /opt
tar -xzvf bot_working_20251128.tar.gz

# –°–æ–∑–¥–∞—Ç—å venv
cd /opt/bot
python3 -m venv venv
source venv/bin/activate
pip install fastapi uvicorn openai python-dotenv httpx

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
nano .env

# –°–æ–∑–¥–∞—Ç—å systemd —Å–µ—Ä–≤–∏—Å
# (—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å realtmeai-bot.service)

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
systemctl start realtmeai-bot
```

---

*–ü–∞—Å–ø–æ—Ä—Ç —Å–æ–∑–¥–∞–Ω: 28 –Ω–æ—è–±—Ä—è 2025*
*–í–µ—Ä—Å–∏—è: –º–æ–Ω–æ–ª–∏—Ç (app.py 127KB)*
*–ê—Ä—Ö–∏–≤: bot_working_20251128.tar.gz (43 KB)*
