# ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è
# PROD –ù–ï –¢–†–û–ì–ê–¢–¨! –†–ê–ë–û–¢–ê–¢–¨ –¢–û–õ–¨–ö–û –í DEV!
# PROD (/opt/bot) ‚Äî –¢–û–õ–¨–ö–û –î–õ–Ø –î–ï–ü–õ–û–Ø –ü–û–°–õ–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø –ò –°–û–ì–õ–ê–°–û–í–ê–ù–ò–Ø!
# –í–°–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –°–ù–ê–ß–ê–õ–ê –í /opt/bot-dev ‚Üí –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï ‚Üí –ü–û–¢–û–ú –í PROD

---

# RIZALTA Bot ‚Äî –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏

## üìÖ –°–µ—Å—Å–∏—è 06.01.2026 (–≤–µ—á–µ—Ä)

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

**1. –ü–û–ß–ò–ù–ï–ù–ê –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö Mini App ‚Üí Bot**
- –ë—ã–ª–æ: `tg.sendData()` –Ω–µ —Ä–∞–±–æ—Ç–∞–ª (–¥–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–∏ –Ω–∏–∫—É–¥–∞)
- –ü—Ä–∏—á–∏–Ω–∞: `sendData()` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å KeyboardButton, –∞ Mini App –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ InlineKeyboardButton
- –†–µ—à–µ–Ω–∏–µ: –≤–µ—Ä–Ω—É–ª–∏ `fetch()` —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ Vercel proxy

**2. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ PROD/DEV —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `?env=dev`**
- PROD: `https://rizalta-miniapp.vercel.app` ‚Üí `/api/*` ‚Üí PROD —Ç—É–Ω–Ω–µ–ª—å
- DEV: `https://rizalta-miniapp.vercel.app?env=dev` ‚Üí `/api-dev/*` ‚Üí DEV —Ç—É–Ω–Ω–µ–ª—å
- Mini App –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—É—Ç—å –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—É env –≤ URL

**3. –û–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ trycloudflare –≤ –†–§**
- –ó–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ Vercel (–Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)
- Vercel –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ trycloudflare —Ç—É–Ω–Ω–µ–ª–∏
- –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ VPN –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞—Ö –†–§

**4. –û–±–Ω–æ–≤–ª—ë–Ω vercel.json —Å –¥–≤—É–º—è proxy**
```json
{
  "rewrites": [
    {"source": "/api-dev/:path*", "destination": "https://provide-resident-retain-employees.trycloudflare.com/api/:path*"},
    {"source": "/api/:path*", "destination": "https://enrolled-chapter-clouds-fold.trycloudflare.com/api/:path*"}
  ]
}
```

**5. –û–±–Ω–æ–≤–ª—ë–Ω App.jsx**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `API_PATH` ‚Äî –≤—ã–±–∏—Ä–∞–µ—Ç `/api` –∏–ª–∏ `/api-dev` –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—É env
- fetch() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `API_PATH + '/miniapp-action'`

**6. –ó–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤—Å–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**
- `rizalta-miniapp` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä env + Vercel rewrites
- `rizalta-bot-dev` ‚Äî ?env=dev –≤ URL Mini App, PROJECT.md v2.3.0
- `rizalta-bot` ‚Äî Mini App –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### üü¢ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- **–í–µ—Ä—Å–∏—è:** 2.3.0
- **Prod:** —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ Mini App —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- **Dev:** —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ Mini App —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- **Mini App:** –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω ‚úÖ
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –†–§:** –æ–±—Ö–æ–¥—è—Ç—Å—è —á–µ—Ä–µ–∑ Vercel ‚úÖ

### üîú –°–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏
- [ ] **Self-Healing —Å–∏—Å—Ç–µ–º–∞** ‚Äî watchdog + –∞–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- [ ] **Named Tunnel / —Å–≤–æ–π –¥–æ–º–µ–Ω** ‚Äî —É–±—Ä–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –º–µ–Ω—è—é—â–∏—Ö—Å—è URL
- [ ] **–î–æ—Ä–∞–±–æ—Ç–∫–∞ Mini App** ‚Äî –≤—ã–±–æ—Ä –¥–µ–π—Å—Ç–≤–∏—è –ø–æ—Å–ª–µ –ª–æ—Ç–∞ (–ö–ü/ROI/–ü–æ–∫–∞–∑)
- [ ] **RealtMy Mini App** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –∫–∞–Ω–∞–ª–æ–≤

### üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `/opt/miniapp/src/App.jsx` ‚Äî API_PATH –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—É env
- `/opt/miniapp/vercel.json` ‚Äî –¥–≤–∞ proxy (PROD + DEV)
- `/opt/bot/app.py` ‚Äî URL Mini App –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- `/opt/bot-dev/app.py` ‚Äî URL Mini App —Å ?env=dev
- `/opt/bot-dev/PROJECT.md` ‚Äî –≤–µ—Ä—Å–∏—è 2.3.0

---

## üìÖ –°–µ—Å—Å–∏—è 06.01.2026 (–¥–µ–Ω—å)

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

**1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**
- –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ PROD/DEV

**2. –û—á–∏—Å—Ç–∫–∞ –º—É—Å–æ—Ä–∞**
- –£–¥–∞–ª—ë–Ω OAZIS ‚Äî –æ—Å–≤–æ–±–æ–∂–¥—ë–Ω –ø–æ—Ä—Ç :8001
- –£–±–∏—Ç—ã –º—É—Å–æ—Ä–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã ‚Äî 2 –¥—É–±–ª–∏–∫–∞—Ç–∞ run_polling.py
- –û—Ç–∫–ª—é—á–µ–Ω –¥—É–±–ª—å cloudflared-quick

**3. Systemd —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è DEV**
```
rizalta-dev-api.service     ‚Äî uvicorn :8002
rizalta-dev-tunnel.service  ‚Äî cloudflared + auto-update
```

**4. Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**
- –°–æ–∑–¥–∞–Ω rizalta-miniapp (github.com/semiekhin/rizalta-miniapp)
- –û–±–Ω–æ–≤–ª—ë–Ω rizalta-bot-dev –¥–æ v2.2.0

**5. PROD: –¥–æ–±–∞–≤–ª–µ–Ω –∫–æ–¥ Mini App**
- API endpoints: GET /api/lots, POST /api/miniapp-action
- –ö–Ω–æ–ø–∫–∞ "üè¢ –õ–æ—Ç—ã" –≤ –º–µ–Ω—é
- Intent handler open_lots_app

### üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `/opt/bot/app.py` ‚Äî API endpoints, CORS, intent handler
- `/opt/bot/config/settings.py` ‚Äî –∫–Ω–æ–ø–∫–∞ "üè¢ –õ–æ—Ç—ã"
- `/opt/bot/services/intent_router.py` ‚Äî open_lots_app

---

## üìÖ –°–µ—Å—Å–∏—è 29.12.2025

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

**1. –ì—Ä—É–ø–ø–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–∫–∞–∑ —Å –∫–Ω–æ–ø–∫–æ–π "–í–∑—è—Ç—å"**
- –ë—ã–ª–æ: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ –∞–¥–º–∏–Ω—É –ª–∏—á–Ω–æ
- –°—Ç–∞–ª–æ: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É —Å –∫–Ω–æ–ø–∫–æ–π "üôã –í–∑—è—Ç—å –∑–∞—è–≤–∫—É"
- –ö—Ç–æ –ø–µ—Ä–≤—ã–π –Ω–∞–∂–∞–ª ‚Äî –∑–∞–±–∏—Ä–∞–µ—Ç, —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞—è–≤–æ–∫ —Å AI-—Å–µ–∫—Ä–µ—Ç–∞—Ä—ë–º**
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–í–∑—è—Ç—å –∑–∞—è–≤–∫—É" —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–¥–∞—á–∞ –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ä–µ
- –ó–∞–¥–∞—á–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º high, –¥–∞—Ç–æ–π –∏ –≤—Ä–µ–º–µ–Ω–µ–º –ø–æ–∫–∞–∑–∞

**3. –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Telegram API**
- `send_message_inline_return_id()` ‚Äî –≤–æ–∑–≤—Ä–∞—Ç message_id
- `edit_message_inline()` ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

**4. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ë–î bookings**
- –ö–æ–ª–æ–Ω–∫–∏: taken_by_id, taken_by_name, group_message_id

**5. –ü—Ä–æ—Ç–æ—Ç–∏–ø Mini App —à–∞—Ö–º–∞—Ç–∫–∏**
- React-–ø—Ä–æ—Ç–æ—Ç–∏–ø –≤–∏–∑—É–∞–ª—å–Ω–æ–π —à–∞—Ö–º–∞—Ç–∫–∏
- –§–∏–ª—å—Ç—Ä—ã: —Å–≤–æ–±–æ–¥–Ω–æ/–±—Ä–æ–Ω—å/–ø—Ä–æ–¥–∞–Ω–æ

**6. –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ: RealtMy ‚Üí Mini App**
- –≠–∫–æ–Ω–æ–º–∏—è: 300-400 —Ç—ã—Å ‚ÇΩ –≤–º–µ—Å—Ç–æ 800-1200 —Ç—ã—Å ‚ÇΩ
- –°—Ä–æ–∫: 3-4 –Ω–µ–¥–µ–ª–∏ –≤–º–µ—Å—Ç–æ 2-3 –º–µ—Å—è—Ü–µ–≤

### üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `app.py` ‚Äî callback `book_take_`
- `services/telegram.py` ‚Äî –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `handlers/booking_calendar.py` ‚Äî handle_take_booking

---

## üìÖ –°–µ—Å—Å–∏—è 24.12.2025

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

**1. –ü–æ–ª–Ω–∞—è –±–∞–∑–∞ –ª–æ—Ç–æ–≤ (348 –≤–º–µ—Å—Ç–æ 69)**
**2. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ö–æ—Ä–ø—É—Å ‚Üí –≠—Ç–∞–∂ ‚Üí –õ–æ—Ç—ã**
**3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—É–±–ª–µ–π –∫–æ–¥–æ–≤ (70 –ª–æ—Ç–æ–≤)**
**4. –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –±—é–¥–∂–µ—Ç—É ¬±10%**
**5. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞—Ä—è (—Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞)**
**6. –ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞ –¥–ª—è —Å–µ–∫—Ä–µ—Ç–∞—Ä—è (11 –∑–æ–Ω)**
**7. –£–±—Ä–∞–Ω–∞ –º–∞—Å—Å–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ö–ü**
**8. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏**
**9. GPT Intent Router —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏**

### üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `app.py` ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, startup_event
- `handlers/kp.py` ‚Äî –ø–∞–≥–∏–Ω–∞—Ü–∏—è, _search_cache
- `handlers/secretary.py` ‚Äî timezone
- `services/secretary_db.py` ‚Äî TIMEZONES
- `services/monitoring.py` ‚Äî –ù–û–í–´–ô

---

## üìÖ –°–µ—Å—Å–∏—è 09.01.2026

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

**1. –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é**
- "üìñ –û –ø—Ä–æ–µ–∫—Ç–µ" ‚Üí "üî•–ö—É–ø–∏ —Å–µ–±–µ –æ—Ç–µ–ª—å!"
- –ù–æ–≤—ã–π –ø—Ä–æ–¥–∞—é—â–∏–π —Ç–µ–∫—Å—Ç —Å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞–º–∏ RIZALTA

**2. –û–±–Ω–æ–≤–ª–µ–Ω—ã —É—Å–ª–æ–≤–∏—è —Ä–∞—Å—Å—Ä–æ—á–∫–∏ 18 –º–µ—Å**
- –ë—ã–ª–æ: 24 –º–µ—Å —Å —É–¥–æ—Ä–æ–∂–∞–Ω–∏–µ–º 12%/9%/6%
- –°—Ç–∞–ª–æ: 18 –º–µ—Å —Å —É–¥–æ—Ä–æ–∂–∞–Ω–∏–µ–º 9%/7%/4%
- –°—Ö–µ–º–∞: 8√ó–ø–ª–∞—Ç—ë–∂ + 9-–π (10%) + 8√ó–ø–ª–∞—Ç—ë–∂ + 18-–π –æ—Å—Ç–∞—Ç–æ–∫

**3. –î–æ–≥–æ–≤–æ—Ä—ã**
- "–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã —Å –£–ö" ‚Üí "–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã —Å –æ—Ç–µ–ª—å–Ω—ã–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º"

**4. –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏**
- –£–¥–∞–ª–µ–Ω–∞ "–û –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–µ"
- "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –ü–µ—Ä–≥–∞–µ–≤" ‚Üí "Pergaev Bureau"
- "–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è RIZALTA" ‚Äî –ø–µ—Ä–≤–∞—è –≤ —Å–ø–∏—Å–∫–µ, –Ω–æ–≤—ã–π —Ñ–∞–π–ª

### üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- config/settings.py
- handlers/docs.py, media.py, menu.py, units.py
- services/intent_router.py, calc_universal.py, kp_pdf_generator.py
- kp_generator.py
- presentations/ (3 —Ñ–∞–π–ª–∞)

### üü¢ –°—Ç–∞—Ç—É—Å
- **–í–µ—Ä—Å–∏—è:** 2.3.1
- **PROD:** —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- **DEV:** —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
